---
import json from '../data.json';
---

<header class="absolute bottom-0 z-20 px-4 sm:px-12 lg:px-24 py-4 flex w-full items-center justify-between">
  <div class="flex w-full justify-between">
    <img class="object-cover h-12" src="assets/logo.png"/>
    <div id="PhoneMenu" class="flex items-center md:hidden">
      <button id="menuButton" class="p-2" type="button">
        <img src="/assets/menubar.svg"/>
      </button>
    </div>
  </div>
  <nav class="w-full md:w-auto md:flex items-center hidden">
    <ul id="MenuItems" class="flex flex-col md:flex-row text-md">
      <li class="px-4 py-2 inline-block text-white"><a href="#home">{json.header.link1}</a></li>
      <li class="px-4 py-2 inline-block text-white"><a href="#about">{json.header.link2}</a></li>
      <li class="px-4 py-2 inline-block text-white"><a href="#committee">{json.header.link3}</a></li>
    </ul>
  </nav>
</header>
<div id="ExpandMenu" class="fixed z-30 py-2 px-4 h-screen w-screen flex flex-col items-center bg-grey hidden">
  <div class="flex w-full justify-between">
    <img class="object-cover h-12" src="assets/logo.png"/>
    <button id="menuButton" class="p-2" type="button">
      <img src="/assets/cross.svg" width="30px" height="30px"/>
    </button>
  </div>
  <nav class="py-16">
    <ul id="MenuItems" class="flex flex-col md:flex-row text-md">
      <li class="px-4 py-2 inline-block text-white text-center">{json.header.link1}</li>
      <li class="px-4 py-2 inline-block text-white text-center">{json.header.link2}</li>
      <li class="px-4 py-2 inline-block text-white text-center">{json.header.link3}</li>
    </ul>
  </nav>
</div>
<script>
  let header = document.querySelector('header') as HTMLElement;
  var userHeight = window.innerHeight - 95;

  window.addEventListener('scroll', function()
  {
    if(document.body.scrollTop > userHeight || document.documentElement.scrollTop > userHeight)
    {
      header.classList.remove("bottom-0");
      header.classList.remove("absolute");
      header.classList.add("top-0");
      header.classList.add("fixed");
      header.classList.add("bg-grey/95");
      header.classList.add("backdrop-blur-sm");
    }
    else
    {
      header.classList.add("bottom-0");
      header.classList.add("absolute");
      header.classList.remove("top-0");
      header.classList.remove("sticky");
      header.classList.remove("bg-grey/95");
      header.classList.remove("backdrop-blur-sm");
    }
  });

  var menuButtons = document.querySelectorAll('#menuButton');

  menuButtons.forEach((button) =>
  {
    button.addEventListener('click', () => {
      document.querySelector('#MainNav')?.classList.toggle('hidden');
      document.querySelector('#ExpandMenu')?.classList.toggle('hidden');
      document.body.classList.toggle('h-100');
      document.body.classList.toggle('overflow-hidden');
    });
  });
  window.onbeforeunload = function ()
  {
    window.scrollTo(0,0);
  }
</script>